@startuml SasView_Architecture

title SasView High-Level Architecture and Dependencies

top to bottom direction

' Define packages and components
package "SasView Application" #FFE5E5 {
  component "SasView CLI/Main" as app
  
  package "QtGUI Module" #FFE5CC {
    component "MainWindow"
    component "Perspectives"
    component "Plotting"
    component "Calculators"
    component "Utilities"
  }
  
  package "SasCalc Module" #E5CCFF {
    component "Fit (Fitting)"
    component "Corfunc (Correlation)"
    component "Invariant"
    component "Inversion (Realspace)"
  }
  
  package "System Module" #CCFFCC {
    component "config"
    component "version"
    component "logger"
  }
}

package "External Dependencies" #E5E5FF {
  component "sasdata" #CCE5FF {
    note right
      - Dataset representation
      - File I/O (HDF5, ASCII)
      - Metadata management
    end note
  }
  
  component "sasmodels" #CCE5FF {
    note right
      - Model definitions
      - Form factors
      - Structure factors
    end note
  }
  
  component "bumps" #CCE5FF {
    note right
      - Optimization algorithms
      - Parameter fitting
      - Uncertainty analysis
    end note
  }
}

' Define relationships
app --> MainWindow
app --> Perspectives

MainWindow --> Perspectives
MainWindow --> Plotting
MainWindow --> Calculators
MainWindow --> Utilities

Perspectives --> "Fit (Fitting)"
Perspectives --> "Corfunc (Correlation)"
Perspectives --> "Invariant"
Perspectives --> "Inversion (Realspace)"

"Fit (Fitting)" --> sasmodels
"Fit (Fitting)" --> sasdata

"Corfunc (Correlation)" --> sasdata
"Invariant" --> sasdata
"Inversion (Realspace)" --> sasdata

Calculators --> sasmodels

logger --> config

MainWindow --> sasdata
MainWindow --> config
MainWindow --> version


@enduml
